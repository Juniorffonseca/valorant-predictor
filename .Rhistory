caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot ADR
ggplot(grafico_data, aes(y = acertos_erros_ADR)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ADR do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot ADR
ggplot(grafico_data, aes(y = acertos_erros_ADR)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ADR do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot R
ggplot(grafico_data, aes(y = acertos_erros_R)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o Rating do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
grafico_data$acertos_erros_R <- factor(grafico_data$acertos_erros_R,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'),
labels = c('Acertou e era maior', 'Acertou e era menor', 'Errou e era menor',
'Errou e era maior', 'Errou e era maior', 'Acertou e era menor',
'Errou e era menor', 'Acertou e era maior'))
# Plot R
ggplot(grafico_data, aes(y = acertos_erros_R)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o Rating do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
grafico_data$acertos_erros_R <- factor(grafico_data$acertos_erros_R,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'))
# Plot R
ggplot(grafico_data, aes(y = acertos_erros_R)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o Rating do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
acertos_erros_R <- paste(R, resultadovspredict$resultado_previsto, resultadovspredict$ganhador)
grafico_data <- as.data.f
grafico_data <- as.data.frame(cbind(acertos_erros_R, acertos_erros_ACS, acertos_erros_KAST, acertos_erros_KD,
acertos_erros_ADR))
grafico_data$acertos_erros_R <- factor(grafico_data$acertos_erros_R,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'))
grafico_data$acertos_erros_R <- fct_rev(grafico_data$acertos_erros_R)
# Plot R
ggplot(grafico_data, aes(y = acertos_erros_R)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o Rating do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot ACS
ggplot(grafico_data, aes(y = acertos_erros_ACS)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ACS do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
grafico_data$acertos_erros_ACS <- factor(grafico_data$acertos_erros_ACS,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'))
grafico_data$acertos_erros_KAST <- factor(grafico_data$acertos_erros_KAST,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'))
grafico_data$acertos_erros_KD <- factor(grafico_data$acertos_erros_KD,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'))
grafico_data$acertos_erros_ADR <- factor(grafico_data$acertos_erros_ADR,
levels = c('1 1 1', '0 0 0', '0 0 1', '1 1 0', '1 0 1', '0 1 1',
'0 1 0', '1 0 0'))
grafico_data$acertos_erros_ACS <- fct_rev(grafico_data$acertos_erros_ACS)
grafico_data$acertos_erros_KAST <- fct_rev(grafico_data$acertos_erros_KAST)
grafico_data$acertos_erros_KD <- fct_rev(grafico_data$acertos_erros_KD)
grafico_data$acertos_erros_ADR <- fct_rev(grafico_data$acertos_erros_ADR)
# Plot ACS
ggplot(grafico_data, aes(y = acertos_erros_ACS)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ACS do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot ACS
ggplot(grafico_data, aes(y = acertos_erros_ACS)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ACS do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot KAST
ggplot(grafico_data, aes(y = acertos_erros_KAST)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o KAST do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot R
ggplot(grafico_data, aes(y = acertos_erros_R)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o Rating do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot ACS
ggplot(grafico_data, aes(y = acertos_erros_ACS)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ACS do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot KAST
ggplot(grafico_data, aes(y = acertos_erros_KAST)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o KAST do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot KD
ggplot(grafico_data, aes(y = acertos_erros_KD)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o KD do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
# Plot ADR
ggplot(grafico_data, aes(y = acertos_erros_ADR)) +
geom_bar(color = 'black', fill = "mediumseagreen") +
geom_text(aes(label = paste0("(",round(..count..*100/nrow(grafico_data)), "%)")),
stat = "count", vjust = 2.1, hjust = 1.3, colour = "black") +
geom_label(aes(y = acertos_erros_R, label = ..count..),
stat = 'count', hjust = 1.3) +
labs(title = 'Relação de acertos com o ADR do time 1 ser maior',
y = 'Tipos de cenário',
x = 'Quantidade de ocorrências',
caption = 'Partidas analisadas: 10284') +
theme_light()
historico <- read.csv2('csv/historico.csv') %>% dplyr::select(-X)
# Carregando pacotes --------------------------------------------------------------------------------------
library(rvest)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(reshape2)
library(tidyverse)
library(neuralnet)
library(readr)
library(purrr)
library(plotly)
library(ggrepel)
# Criando variável pá
historico <- read.csv2('csv/historico.csv') %>% dplyr::select(-X)
View(historico)
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', 'A', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'A', 'KAST', 'ADR')
info2$K <- substr(info$K, 1, 2)
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- substr(info$K, 1, 2)
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 2)
info$A <- substr(info$A, 1, 2)
info$KAST <- substr(info$KAST, 1, 3)
info$ADR <- substr(info$ADR, 1, 3)
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- substr(info$K, 1, 3)
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info$D
info$K <- substr(info$K, 1, 3)
info$K
info$K <- str_replace_all(info$K, '\n', '') %>%
str_replace_all('\n', '') %>%
str_replace_all('/  ', '')
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- substr(info$K, 1, 3)
info$K <- str_replace_all(info$K, '\n', '') %>%
str_replace_all('\n', '') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- str_replace_all(info$K, '\n', '') %>%
str_replace_all('\n', '') %>%
str_replace_all('/  ', '')
info$K <- substr(info$K, 1, 3)
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- str_replace_all(info$K, '\t', '') %>%
str_replace_all('\n', '') %>%
str_replace_all('/  ', '')
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- str_replace_all(info$K, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$K <- substr(info$K, 1, 3)
info$K
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info$D
info$KAST <- substr(info$KAST, 1, 3)
info$ADR <- substr(info$ADR, 1, 3)
info <- separate(info, 'jogador', into = c("Player", "Team"), sep = "\\s+", extra = "merge")
info <- cbind(info, ganhador)
View(info)
info <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("table") %>%
html_table()
placar <- read_html('https://www.vlr.gg/108243/ninjas-in-pyjamas-vs-keyd-stars-champions-tour-brazil-stage-2-challengers-lbf') %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', 'A', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- str_replace_all(info$K, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$K <- substr(info$K, 1, 3)
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info$KAST <- substr(info$KAST, 1, 3)
info$ADR <- substr(info$ADR, 1, 3)
info <- separate(info, 'jogador', into = c("Player", "Team"), sep = "\\s+", extra = "merge")
info <- cbind(info, ganhador)
a <- read.csv2('csv/a.csv') %>% dplyr::select(-X)
View(a)
catalogarporUrl <- function (string){
tryCatch(
{
info <- read_html(string) %>%
html_nodes("table") %>%
html_table()
placar <- read_html(string) %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', 'A', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- str_replace_all(info$K, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$K <- substr(info$K, 1, 3)
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info$KAST <- substr(info$KAST, 1, 3)
info$ADR <- substr(info$ADR, 1, 3)
info <- separate(info, 'jogador', into = c("Player", "Team"), sep = "\\s+", extra = "merge")
info <- cbind(info, ganhador)
return(info)
}
, error = function(e){cat('error:', conditionMessage(e), '\n')})
}
rm (c, f, i, p, matchs, paginas)
m <- 1
dff <- list()
for (i in a[,]){
tryCatch({
dff[[length(dff)+1]] <- catalogarporUrl(a[m,])
m = m + 1
}, error = function(e){cat('error:', conditionMessage(e), '\n')})
}
as.string()
as.string(x)
as.string('a')
as_string(a[1])
?as_string
as_string(a)
as.character(a[1])
a[1]
a[[1]]
a[1][1]
a[[1]][[1]]
as.character(a[[1]][[1]])
x <- as.character(a[[1]][[1]])
y <- a[[1]][[1]]
catalogarporUrl <- function (as.character(string)){
catalogarporUrl <- function (string){
tryCatch(
{
info <- read_html(as.character(string)) %>%
html_nodes("table") %>%
html_table()
placar <- read_html(as.character(string)) %>%
html_nodes("div.js-spoiler") %>% html_text(trim=T)
placar <- str_replace_all(placar, '\t', '') %>% str_replace_all('\n', '')
placar <- as.data.frame(placar[1])
placar <- separate(placar, 'placar[1]', into = c('Time1', 'Time2'), sep = ':', extra = 'merge')
ifelse(placar$Time1 > placar$Time2, ganhador <- c(1,1,1,1,1,0,0,0,0,0), ganhador <- c(0,0,0,0,0,1,1,1,1,1))
info <- rbind(info[[3]], info[[4]])
colnames(info) <- c('jogador', 'time', 'R', 'ACS', 'K', 'D', 'A', '+/-', 'KAST', 'ADR', 'HS%', 'FK', 'FD', 'z')
info <- select(info, 'jogador', 'R', 'ACS', 'K', 'D', 'KAST', 'ADR')
info$R <- substr(info$R, 1, 4)
info$ACS <- substr(info$ACS, 1, 3)
info$K <- str_replace_all(info$K, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$K <- substr(info$K, 1, 3)
info$D <- str_replace_all(info$D, '\t', '') %>%
str_replace_all('\n', ' ') %>%
str_replace_all('/  ', '')
info$D <- substr(info$D, 1, 3)
info$KAST <- substr(info$KAST, 1, 3)
info$ADR <- substr(info$ADR, 1, 3)
info <- separate(info, 'jogador', into = c("Player", "Team"), sep = "\\s+", extra = "merge")
info <- cbind(info, ganhador)
return(info)
}
, error = function(e){cat('error:', conditionMessage(e), '\n')})
}
a <- read.csv2('csv/a.csv') %>% dplyr::select(-X)
rm (c, f, i, p, matchs, paginas)
m <- 1
dff <- list()
for (i in a[,]){
tryCatch({
dff[[length(dff)+1]] <- catalogarporUrl(a[m,])
m = m + 1
}, error = function(e){cat('error:', conditionMessage(e), '\n')})
}
View(a)
View(dff)
for (i in a[,]){
tryCatch({
dff[[length(dff)+1]] <- catalogarporUrl(a[m,])
m = m + 1
}, error = function(e){cat('error:', conditionMessage(e), '\n')})
}
View(dff)
for (i in a[,]){
tryCatch({
dff[[length(dff)+1]] <- catalogarporUrl(a[m,])
m = m + 1
}, error = function(e){cat('error:', conditionMessage(e), '\n')})
}
