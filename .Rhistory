View(urls)
urls <- bind_rows(urls_lista[,2])
urls <- bind_rows(urls_lista[[2]])
urls <- bind_rows(urls_lista[[,2]])
urls <- bind_rows(urls_lista[][2])
urls <- bind_rows(lapply(urls_lista, select, 2))
urls <- bind_rows(as.character(urls_lista))
df_list <- lapply(df_list, function(df) {
df$x <- as.character(df$x)
return(df)
})
df_list <- lapply(urls_lista, function(df) {
df$x <- as.character(df$x)
return(df)
})
View(df_list)
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
library(caret)
library(dplyr)
library(tidyr)
library(rvest)
library(rsample)
library(readr)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(neuralnet)
library(nnet)
library(caret)
library(ggplot2)
library(ModelMetrics)
library(beepr)
library(purrr)
library(plotly)
library(pROC)
library(ROCR)
library(kableExtra)
library(glmnet)
library(valorant)
# Carregando partidas diarias e unindo em um df ------------------------------------------------------------
datas <- seq(as.Date('2023-02-19'), as.Date('2023-04-09'), by = 'day')
nomes_arquivos <- paste0('csv/catalogacao_diaria/', format(datas, '%Y-%m-%d'), '_urls.csv')
urls_lista <- list()
for (arquivo in nomes_arquivos) {
urls_lista[[arquivo]] <- possibly(read.csv2, otherwise = NULL)(arquivo)
}
urls_lista <- lapply(urls_lista, function(df) {
df$x <- as.character(df$x)
return(df)
})
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
library(caret)
library(dplyr)
library(tidyr)
library(rvest)
library(rsample)
library(readr)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(neuralnet)
library(nnet)
library(caret)
library(ggplot2)
library(ModelMetrics)
library(beepr)
library(purrr)
library(plotly)
library(pROC)
library(ROCR)
library(kableExtra)
library(glmnet)
library(valorant)
# Carregando partidas diarias e unindo em um df ------------------------------------------------------------
datas <- seq(as.Date('2023-02-19'), as.Date('2023-04-09'), by = 'day')
nomes_arquivos <- paste0('csv/catalogacao_diaria/', format(datas, '%Y-%m-%d'), '_urls.csv')
urls_lista <- list()
for (arquivo in nomes_arquivos) {
urls_lista[[arquivo]] <- possibly(read.csv2, otherwise = NULL)(arquivo)
}
urls_lista <- lapply(urls_lista, function(df) {
df$x <- as.character(df$x)
return(df)
})
urls <- bind_rows(urls_lista)
urls
View(urls)
View(urls)
View(urls)
View(urls)
urls <- bind_rows(urls_lista) %>% select(-X)
View(urls)
setwd('C:/Users/anonb/Documents/TCC_Pós/Scripts')
write.csv2(urls, 'csv/urls_utilizados.csv')
nomes_times <- list()
for (url in urls){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
}
for (url in urls){
nomes_times[length(nomes_times)+1] <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
}
for (url in urls[,]){
nomes_times[length(nomes_times)+1] <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
}
nomes_times
View(nomes_times)
warnings()
read_html(urls[1]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times[length(nomes_times)+1] <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
}
View(urls)
nomes_times
read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
z <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times <- matrix(nrow = 0, ncol = 2)
nomes_times <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times <- matrix(nrow = 0, ncol = 2)
nomes_times[length(nomes_times)+1] <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times[length(nomes_times)+2] <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times <- matrix(nrow = 0, ncol = 2)
nomes_times[length(nomes_times)+2] <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times[length(nomes_times)+1,] <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_times <- matrix(nrow = 0, ncol = 2)
nomes_times <- read_html(urls[1,]) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind()
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind()
}
View(urls)
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times, .)
}
nomes_times
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times)
}
nomes_times
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times)
}
nomes_times
View(urls)
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times)
}
View(nomes_times)
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times)
}
nomes_times
View(urls)
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times)
}
nomes_times
nomes_times[1,]
nomes_times[,1]
x <- as.data.frame(nomes_times)
View(x)
nomes_times <- as.data.frame(nomes_times)
rm(x)
nomes_times[674:1]
nomes_times[674:1,]
nomes_times <- as.data.frame(nomes_times) %>% [length():1]
nomes_times <- as.data.frame(nomes_times) %>% .[length():1]
nomes_times <- as.data.frame(nomes_times) %>% .[length(.):1]
View(nomes_times)
nomes_times <- as.data.frame(nomes_times) %>% nomes_times[length(.):1]
nomes_times <- as.data.frame(nomes_times) %>% .[length(nomes_times):1]
View(nomes_times)
nomes_times <- as.data.frame(nomes_times) %>% .[length(.):1,]
View(nomes_times)
x
nomes_times <- matrix(nrow = 0, ncol = 2)
for (url in urls[,]){
nomes_times <- read_html(url) %>% html_nodes("div.wf-title-med") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% rbind(nomes_times)
}
nomes_times <- as.data.frame(nomes_times) %>% slice(rev(row_number))
backup <- nomes_times
nomes_times <- as.data.frame(nomes_times) %>%
rev() %>%
`rownames<-`(NULL)
View(nomes_times)
nomes_times <- as.data.frame(nomes_times) %>%
rev() %>%
`rownames<-`(NULL) %>% slice(rev(row_number()))
View(nomes_times)
nomes_times <- backup
nomes_times <- as.data.frame(nomes_times) %>%
rev() %>%
`rownames<-`(NULL) %>% slice(rev(row_number()))
View(nomes_times)
nomes_times <- backup
nomes_times <- as.data.frame(nomes_times) %>%
`rownames<-`(NULL) %>% slice(rev(row_number()))
View(nomes_times)
write.csv2(nomes_times, 'csv/times_catalogados.csv')
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text()
nomes_jogadores
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"")
nomes_jogadores
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% select(1:10)
nomes_jogadores
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% select(., 1:10)
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% .(1:10)
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% select(1:10,)
nomes_jogadores(1:10)
nomes_jogadores[1:10]
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% [1:10]
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t",
"") %>% .[1:10]
nomes_jogadores
nomes_jogadores <- matrix(nrow = 0, ncol = 10)
nomes_jogadores <- matrix(nrow = 0, ncol = 10)
for(url in urls[,]){
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t", "") %>%
.[1:10] %>% rbind(nomes_jogadores)
}
nomes_jogadores
View(nomes_jogadores)
nomes_jogadores <- matrix(nrow = 0, ncol = 10)
for(url in urls[,]){
nomes_jogadores <- read_html(url) %>% html_nodes("td.mod-player a") %>%
html_text() %>% str_replace_all("\n", "") %>% str_replace_all("\t", "") %>%
.[1:10] %>% rbind(nomes_jogadores)
}
backup <- nomes_jogadores
View(nomes_jogadores)
nomes_jogadores <- as.data.frame(nomes_jogadores) %>%
`rownames<-`(NULL) %>% slice(rev(row_number()))
View(nomes_jogadores)
write.csv2(nomes_jogadores, 'csv/jogadores_catalogados.csv')
unique(nomes_jogadores)
count(unique(nomes_jogadores))
count(max(nomes_jogadores))
count(unique(nomes_times))
count(max(nomes_jogadores[,]))
count(max(nomes_jogadores))
count(unique(nomes_jogadores[]))
count(unique(nomes_jogadores[,]))
View(nomes_jogadores)
sapply(nomes_jogadores, function(x) length(unique(x)))
# Número de times únicos:
count(unique(nomes_times)) #628
sapply(nomes_jogadores, function(x) length(unique(x)))
sum(sapply(nomes_jogadores, function(x) length(unique(x))))
# Número de jogadores únicos:
sum(sapply(nomes_jogadores, function(x) length(unique(x)))) #
histogram(nomes_jogadores)
histogram(nomes_times)
histogram(nomes_times$V1)
histogram(count(nomes_times))
histogram(count(nomes_times$V1))
histogram(count(unique(nomes_times$V1)))
# Carregando pacotes --------------------------------------------------------------------------------------
library(rvest)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(reshape2)
library(tidyverse)
library(neuralnet)
library(readr)
library(purrr)
library(valorant)
library(lubridate)
setwd('C:/Users/anonb/Documents/TCC_Pós/Scripts')
# Carregando arquivos csv ---------------------------------------------------------------------------------
nome_arquivo_urls <- paste(Sys.Date() - 0, '_urls.csv', sep = '')
nome_arquivo_previsoes <- paste(Sys.Date() - 0, '_previsoes.csv', sep = '')
nome_arquivo_acuracia <- paste(Sys.Date() - 0, '_acuracia.csv', sep = '')
b <- read.csv2(paste('csv/catalogacao_diaria/', nome_arquivo_urls, sep = '')) %>% select(-X) %>% unlist()
previsoes <- read.csv2(paste('csv/previsao_diaria/', nome_arquivo_previsoes, sep = '')) %>% select(-X)
ganhador <- '' %>% .[0]
for (i in b){
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}
ganhador <- '' %>% .[0]
for (i in b){
tryCatch({
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}, error = function(e) {
# caso ocorra um erro, imprimir mensagem de erro e continuar o loop
cat("Erro ao checar a URL", url, ":", conditionMessage(e), "\n")
})
}
detach("package:valorant", unload = TRUE)
# Carregando pacotes --------------------------------------------------------------------------------------
library(rvest)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(reshape2)
library(tidyverse)
library(neuralnet)
library(readr)
library(purrr)
library(valorant)
library(lubridate)
setwd('C:/Users/anonb/Documents/TCC_Pós/Scripts')
nome_arquivo_urls <- paste(Sys.Date() - 0, '_urls.csv', sep = '')
nome_arquivo_previsoes <- paste(Sys.Date() - 0, '_previsoes.csv', sep = '')
nome_arquivo_acuracia <- paste(Sys.Date() - 0, '_acuracia.csv', sep = '')
b <- read.csv2(paste('csv/catalogacao_diaria/', nome_arquivo_urls, sep = '')) %>% select(-X) %>% unlist()
previsoes <- read.csv2(paste('csv/previsao_diaria/', nome_arquivo_previsoes, sep = '')) %>% select(-X)
ganhador <- '' %>% .[0]
for (i in b){
tryCatch({
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}, error = function(e) {
# caso ocorra um erro, imprimir mensagem de erro e continuar o loop
cat("Erro ao checar a URL", url, ":", conditionMessage(e), "\n")
})
}
ganhador <- '' %>% .[0]
for (i in b){
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}
detach("package:valorant", unload = TRUE)
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
# Carregando pacotes --------------------------------------------------------------------------------------
library(rvest)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(reshape2)
library(tidyverse)
library(neuralnet)
library(readr)
library(purrr)
library(valorant)
library(lubridate)
setwd('C:/Users/anonb/Documents/TCC_Pós/Scripts')
nome_arquivo_urls <- paste(Sys.Date() - 0, '_urls.csv', sep = '')
nome_arquivo_previsoes <- paste(Sys.Date() - 0, '_previsoes.csv', sep = '')
nome_arquivo_acuracia <- paste(Sys.Date() - 0, '_acuracia.csv', sep = '')
b <- read.csv2(paste('csv/catalogacao_diaria/', nome_arquivo_urls, sep = '')) %>% select(-X) %>% unlist()
previsoes <- read.csv2(paste('csv/previsao_diaria/', nome_arquivo_previsoes, sep = '')) %>% select(-X)
ganhador <- '' %>% .[0]
for (i in b){
tryCatch({
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}, error = function(e) {
# caso ocorra um erro, imprimir mensagem de erro e continuar o loop
cat("Erro ao checar a URL", url, ":", conditionMessage(e), "\n")
})
}
ganhador <- '' %>% .[0]
for (i in b){
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}
ganhador <- '' %>% .[0]
for (i in b){
tryCatch({
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}, error = function(e) {
# caso ocorra um erro, imprimir mensagem de erro e continuar o loop
cat("Erro ao checar a URL", url, ":", conditionMessage(e), "\n")
return(NULL)
})
}
detach("package:valorant", unload = TRUE)
# Instalando (se necessário) e carregando pacotes ----------------------------------------------------------
remotes::install_github('Juniorffonseca/r-pacote-valorant')
library(valorant)
ganhador <- '' %>% .[0]
for (i in b){
tryCatch({
ganhador[length(ganhador)+1] <- get_Ganhadores(i)
}, error = function(e) {
# caso ocorra um erro, imprimir mensagem de erro e continuar o loop
cat("Erro ao checar a URL", url, ":", conditionMessage(e), "\n")
return(NULL)
})
}
ganhador
b
df <- cbind(b, previsoes)
df$ganhador <- ganhador
df <- df[!df$ganhador %in% "empate", ]
df$V1_n <- as.numeric(ifelse(is.na(str_extract(df$V1, "\\d{1,2}[.,]\\d{1,2}")),
str_extract(df$V1, "\\d{1,2}"),
str_extract(df$V1, "\\d{1,2}[.,]\\d{1,2}")))
df$V2_n <- as.numeric(ifelse(is.na(str_extract(df$V2, "\\d{1,2}[.,]\\d{1,2}")),
str_extract(df$V2, "\\d{1,2}"),
str_extract(df$V2, "\\d{1,2}[.,]\\d{1,2}")))
df$prev <- ifelse(as.numeric(df$V1_n)>as.numeric(df$V2_n), 1, 0)
acertos <- sum(df$ganhador == df$prev)
erros <- sum(df$ganhador != df$prev)
acuracia <- acertos/nrow(df)
acuracia_diaria <- as.data.frame(cbind(acertos, erros, acuracia))
View(df)
taskscheduleR:::taskschedulerAddin()
taskscheduleR:::taskschedulerAddin()
# Instalando pacotes (se necessário) e carregando ----------------------------------------------------------
library(devtools)
#install_github('Juniorffonseca/r-pacote-valorant')
library(caret)
library(dplyr)
library(tidyr)
library(rvest)
library(rsample)
library(readr)
library(quantmod)
library(httr)
library(tibble)
library(stringr)
library(neuralnet)
library(nnet)
library(caret)
library(ggplot2)
library(ModelMetrics)
library(beepr)
library(purrr)
library(plotly)
library(pROC)
library(ROCR)
library(kableExtra)
library(valorant)
setwd('C:/Users/anonb/Documents/TCC_Pós/Scripts')
# Carregando partidas diarias e unindo em um df ------------------------------------------------------------
datas <- seq(as.Date('2023-04-11'), Sys.Date() - 1, by = 'day')
nomes_arquivos <- paste0('csv/previsao_diaria/', format(datas, '%Y-%m-%d'), '_acuracia.csv')
acuracia <- list()
for (arquivo in nomes_arquivos) {
acuracia[[arquivo]] <- possibly(read.csv2, otherwise = NULL)(arquivo)
}
acuracia <- bind_rows(acuracia) %>% select(-X)
acertos <- sum(acuracia$acertos)
erros <- sum(acuracia$erros)
print(acuracia_total <- acertos/(acertos+erros))
